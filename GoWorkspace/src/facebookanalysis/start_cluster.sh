#!/bin/bash
aws emr create-cluster --applications Name=Hadoop --ec2-attributes '{"InstanceProfile":"EMR_EC2_DefaultRole","SubnetId":"subnet-460d951f","EmrManagedSlaveSecurityGroup":"sg-574b8031","EmrManagedMasterSecurityGroup":"sg-564b8030"}' --service-role EMR_DefaultRole --enable-debugging --release-label emr-4.7.2 --log-uri 's3n://aws-logs-744984309673-us-west-2/elasticmapreduce/' --steps '[{"Args":["hadoop-streaming","-files","s3://facebook-analysis/bin/wc,s3://facebook-analysis/bin/wc","-mapper","wc map","-reducer","wc reduce","-input","s3://facebook-analysis/input/input.txt","-output","s3://facebook-analysis/output_'$1'"],"Type":"CUSTOM_JAR","ActionOnFailure":"TERMINATE_CLUSTER","Jar":"command-runner.jar","Properties":"","Name":"Streaming program"}]' --name 'JordanWCGO' --instance-groups '[{"InstanceCount":1,"InstanceGroupType":"MASTER","InstanceType":"m3.xlarge","Name":"Master Instance Group"},{"InstanceCount":2,"InstanceGroupType":"CORE","InstanceType":"m3.xlarge","Name":"Core Instance Group"}]' --auto-terminate --region us-west-2
